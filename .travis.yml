language: perl
os: linux
dist: xenial
perl:
  - "5.30"
  - 5.28
  - 5.26 
  - 5.24
  - 5.22
  - "5.20"
  - 5.18
  - 5.16
  - 5.14
jobs:
  include:
    - perl: 5.12
      dist: trusty
    - perl: "5.10"
      dist: trusty
    - perl: 5.8
      dist: trusty
  allow_failures:
    - perl: 5.8
    - perl: 5.12
before_install:
  - perlbrew install-cpanm -f
install:
  - (cd App-cpanminus && cpanm -nq --installdeps --with-develop --with-recommends --with-suggests .)
  - (cd Menlo && cpanm -nq --installdeps --with-develop --with-recommends --with-suggests .)
script:
  - (cd App-cpanminus && prove -lr xt -j9)
